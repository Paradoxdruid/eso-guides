<script>
(function() {
  const toggle = document.getElementById('menu-toggle');
  const mobileToc = document.querySelector('.mobile-toc');
  
  if (toggle && mobileToc) {
    // Create overlay element
    const overlay = document.createElement('div');
    overlay.className = 'mobile-toc-overlay';
    overlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 998;
      display: none;
    `;
    document.body.appendChild(overlay);
    
    // Toggle menu and overlay
    toggle.addEventListener('change', function() {
      if (this.checked) {
        mobileToc.style.right = '0';
        overlay.style.display = 'block';
      } else {
        mobileToc.style.right = '-100%';
        overlay.style.display = 'none';
      }
    });
    
    // Close when clicking overlay
    overlay.addEventListener('click', function() {
      toggle.checked = false;
      mobileToc.style.right = '-100%';
      overlay.style.display = 'none';
    });
    
    // Close when clicking any link
    const links = mobileToc.querySelectorAll('a');
    links.forEach(function(link) {
      link.addEventListener('click', function() {
        toggle.checked = false;
        mobileToc.style.right = '-100%';
        overlay.style.display = 'none';
      });
    });
  }
})();
</script>
